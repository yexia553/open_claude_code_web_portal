// Internationalization support for Open Claude Code Web
const translations = {
    en: {
        hero: {
            title: "Open-Source AI Coding Assistant",
            subtitle: "Run Claude Code on your server with cost-effective AI models like GLM-4.6, Kimi K2 and more. Take control of your development environment.",
            github: "Start Free Now",
            learnMore: "Learn More"
        },
        features: {
            title: "Why Choose Open Claude Code Web?",
            subtitle: "We built Open Claude Code Web because we wanted more flexibility than what commercial platforms offer. Experience true freedom in AI-assisted coding with complete control and cost efficiency.",
            comparison: {
                anthropic: {
                    title: "Anthropic Claude Code",
                    limitations: [
                        "Locked to Anthropic's models only",
                        "Code processed on cloud servers",
                        "High monthly subscription fees",
                        "Vendor lock-in and dependency",
                        "Limited customization options"
                    ]
                },
                open: {
                    title: "Open Claude Code Web",
                    advantages: [
                        "Multiple models: GLM-4.6, Kimi K2, Qwen, and more",
                        "Complete privacy - code stays on your server",
                        "80%+ cost reduction compared to alternatives",
                        "Complete freedom and independence",
                        "Open source and fully customizable"
                    ]
                }
            },
            modelFreedom: {
                title: "Model Freedom",
                description: "While Anthropic's Claude Code on the Web locks you into their own model, Open Claude Code Web lets you run a variety of cutting-edge models like GLM-4.6, Kimi K2, and Qwen 3-Coder on your own server. More freedom to choose what works best for your projects."
            },
            privacy: {
                title: "Complete Privacy",
                description: "Your code never leaves your server. This ensures that sensitive data and proprietary code remain fully protected. Unlike cloud-based solutions, where data is stored remotely, Open Claude Code Web guarantees end-to-end privacy by keeping everything on your own infrastructure."
            },
            costEffective: {
                title: "Cost Effective",
                description: "Why pay for expensive commercial alternatives when you can host the solution yourself? Reduce AI coding assistant costs by 80%+ compared to commercial alternatives. Take control of your AI coding assistant today!"
            },
            opensource: {
                title: "Open Source",
                description: "We believe in the power of community. Open Claude Code Web is 100% open-source and free to use under the MIT license. This means you can contribute to the project, customize it for your own needs, or even use it commercially."
            },
            deployment: {
                title: "Easy Deployment",
                description: "One-click deployment to any cloud server. Compatible with Cloudflare Pages for frontend hosting."
            },
            extensible: {
                title: "Highly Extensible",
                description: "Plugin system allows for custom functionality. Integrates with your existing development tools."
            }
        },
        tech: {
            title: "Technical Architecture",
            subtitle: "Built with modern web technologies for optimal performance",
            frontend: {
                title: "Frontend"
            },
            backend: {
                title: "Backend"
            },
            supportedModels: {
                title: "Supported AI Models"
            }
        },
        cta: {
            title: "Ready to Take Control of Your AI Coding Assistant?",
            subtitle: "Join thousands of developers who have already made the switch to affordable, private, and powerful AI assistance. Start your project today!",
            github: "Start Your Project Now",
            contact: "Join Community"
        },
        footer: {
            links: {
                title: "Quick Links",
                features: "Features",
                documentation: "Documentation",
                support: "Support"
            },
            community: {
                title: "Community"
            },
            copyright: "© 2024 Open Claude Code Web. Licensed under MIT. Built with ❤️ by the open source community."
        }
    },
    zh: {
        hero: {
            title: "开源AI编程助手",
            subtitle: "在你的服务器上运行Claude Code，支持GLM-4.6、Kimi K2等多种高性价比AI模型。掌控你的开发环境。",
            github: "立即免费开始",
            learnMore: "了解更多"
        },
        features: {
            title: "为什么选择Open Claude Code Web？",
            subtitle: "我们构建Open Claude Code Web是因为我们想要比商业平台提供更多的灵活性。体验真正的AI辅助编程自由，同时拥有完全的控制权和成本效益。",
            comparison: {
                anthropic: {
                    title: "Anthropic Claude Code",
                    limitations: [
                        "只能使用Anthropic的模型",
                        "代码在云服务器上处理",
                        "高昂的月度订阅费用",
                        "供应商锁定和依赖",
                        "有限的定制选项"
                    ]
                },
                open: {
                    title: "Open Claude Code Web",
                    advantages: [
                        "多种模型：GLM-4.6、Kimi K2、通义千问等",
                        "完全隐私保护 - 代码保留在你的服务器上",
                        "相比替代方案节省80%以上成本",
                        "完全的自由和独立性",
                        "开源且完全可定制"
                    ]
                }
            },
            modelFreedom: {
                title: "模型自由选择",
                description: "当Anthropic的Claude Code on the Web将你锁定在自家模型时，Open Claude Code Web让你在自己的服务器上运行各种前沿模型，如GLM-4.6、Kimi K2和通义千问3-Coder。拥有更多自由来选择最适合你项目的模型。"
            },
            privacy: {
                title: "完全隐私保护",
                description: "你的代码永远不会离开你的服务器。这确保了敏感数据和专有代码得到完全保护。与数据存储在远程的基于云的解决方案不同，Open Claude Code Web通过将所有内容保留在自己的基础设施上，保证端到端的隐私。"
            },
            costEffective: {
                title: "经济高效",
                description: "为什么要为昂贵的商业替代方案付费，当你自己可以托管解决方案？相比商业替代品，AI编程助手成本降低80%以上。今天就掌控你的AI编程助手！"
            },
            opensource: {
                title: "开源免费",
                description: "我们相信社区的力量。Open Claude Code Web是100%开源的，在MIT许可证下免费使用。这意味着你可以为项目做贡献，根据自己的需求定制，甚至商业使用。"
            },
            deployment: {
                title: "轻松部署",
                description: "一键部署到任何云服务器。兼容Cloudflare Pages进行前端托管。"
            },
            extensible: {
                title: "高度可扩展",
                description: "插件系统支持自定义功能。与你现有的开发工具集成。"
            }
        },
        tech: {
            title: "技术架构",
            subtitle: "采用现代Web技术构建，确保最佳性能",
            frontend: {
                title: "前端"
            },
            backend: {
                title: "后端"
            },
            supportedModels: {
                title: "支持的AI模型"
            }
        },
        cta: {
            title: "准备好掌控你的AI编程助手了吗？",
            subtitle: "加入数千名已经转向经济实惠、私密安全、功能强大的AI辅助开发的开发者。今天就启动你的项目！",
            github: "立即启动项目",
            contact: "加入社区"
        },
        footer: {
            links: {
                title: "快速链接",
                features: "功能特性",
                documentation: "文档",
                support: "支持"
            },
            community: {
                title: "社区"
            },
            copyright: "© 2024 Open Claude Code Web。基于MIT许可证。由开源社区用❤️构建。"
        }
    }
};

class I18n {
    constructor() {
        this.currentLang = localStorage.getItem('language') || 'en';
        this.translations = translations;
        this.init();
    }

    init() {
        // Set initial language
        this.setLanguage(this.currentLang);

        // Add language switcher event listener
        const languageSelect = document.getElementById('languageSelect');
        if (languageSelect) {
            languageSelect.value = this.currentLang;
            languageSelect.addEventListener('change', (e) => {
                this.setLanguage(e.target.value);
            });
        }
    }

    setLanguage(lang) {
        this.currentLang = lang;
        localStorage.setItem('language', lang);
        this.updateDOM();

        // Update HTML lang attribute
        document.documentElement.lang = lang;

        // Update page title
        this.updatePageTitle();
    }

    t(key) {
        const keys = key.split('.');
        let value = this.translations[this.currentLang];

        for (const k of keys) {
            if (value && value[k]) {
                value = value[k];
            } else {
                return key; // Return key if translation not found
            }
        }

        return value || key;
    }

    updateDOM() {
        // Update all elements with data-i18n attribute
        const elements = document.querySelectorAll('[data-i18n]');
        elements.forEach(element => {
            const key = element.getAttribute('data-i18n');
            const translation = this.t(key);

            if (element.tagName === 'INPUT' && element.type === 'text') {
                element.placeholder = translation;
            } else if (element.tagName === 'INPUT' && element.type === 'submit') {
                element.value = translation;
            } else {
                element.textContent = translation;
            }
        });

        // Update comparison table lists
        this.updateComparisonLists();
    }

    updateComparisonLists() {
        // Update Anthropic limitations
        const anthropicList = document.getElementById('anthropic-limitations');
        if (anthropicList) {
            const limitations = this.t('features.comparison.anthropic.limitations');
            anthropicList.innerHTML = limitations.map(limitation =>
                `<li class="flex items-start">
                    <i class="fas fa-times-circle mt-0.5 mr-2 text-red-500"></i>
                    <span>${limitation}</span>
                </li>`
            ).join('');
        }

        // Update Open Claude Code Web advantages
        const openList = document.getElementById('open-advantages');
        if (openList) {
            const advantages = this.t('features.comparison.open.advantages');
            openList.innerHTML = advantages.map(advantage =>
                `<li class="flex items-start">
                    <i class="fas fa-check-circle mt-0.5 mr-2 text-green-500"></i>
                    <span>${advantage}</span>
                </li>`
            ).join('');
        }
    }

    updatePageTitle() {
        const titleKey = this.currentLang === 'zh' ?
            'Open Claude Code Web - 开源AI编程助手' :
            'Open Claude Code Web - Open-Source AI Coding Assistant';
        document.title = titleKey;
    }
}

// Initialize i18n when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
    window.i18n = new I18n();
});

// Export for use in other modules
if (typeof module !== 'undefined' && module.exports) {
    module.exports = I18n;
}